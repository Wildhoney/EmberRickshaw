/*! EmberRickshaw by Adam Timberlake created on 2013-07-17 */
Rickshaw.Graph.Ember=function(a){Ember.assert("You must supply the `collection` array in the `data` attribute.",!!a.collection),Ember.assert("You must specify the property in the `data` attribute to use for the graph data.",!!a.series[0].data);var b=(a.series[0].data,a.collection);this.models=b,this.properties=[],this.options=a;for(var c in a.series)a.series.hasOwnProperty(c)&&this.properties.push(a.series[c].data);this.setData();for(var d in this.properties)this.properties.hasOwnProperty(d)&&Ember.addObserver(this.models,"@each.%@".fmt(this.properties[d]),this,"render");Ember.addObserver(b,"length",this,"render"),Ember.isNone(a.element)&&(this.options.element=document.createElement("div"),Ember.Logger.info("We're using Rickshaw in testing mode and therefore nothing will be visible.")),delete this.options.collection,this.graph=new Rickshaw.Graph(this.options)},Rickshaw.Graph.Ember.prototype.toRickshaw=function(){return this.graph},Rickshaw.Graph.Ember.prototype.setData=function(){var a=[];return this.properties.forEach(function(b,c){var d=[];this.models.forEach(function(a,c){var e=parseFloat(a.get(b));e=isNaN(e)?0:e,d.push({x:c,y:e})},this),this.options.series[c].data=d,a.push(d)},this),a},Rickshaw.Graph.Ember.prototype.render=function(){this.setData(),this.graph.render()},Rickshaw.Graph.Ember.prototype.ticks=function(a,b){var c=this.models.mapProperty(b);return c[a]};